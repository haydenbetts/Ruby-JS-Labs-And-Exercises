<%= form_for(@post) do |f| %>

  <p>
      <%= f.label :title %>
      <%= f.text_field :title %>

  </p>
  <p>
      <%= f.label :content %>
      <%= f.text_area :content %>
  </p>


  <%= f.collection_check_boxes(:category_ids, Category.all, :id, :downcase_name) do |b| %>
    <p><%= b.label %>
      <%= b.check_box %>
    </p>
    <% end %>


  <%# my old implementation %>
  <% if false %>
    <% Category.all.each do |category| %>
      <label for="category_id_<%= category.id %>" ><%= category.name %> </label>
      <input type="checkbox" name="post[category_ids][]" value="<%= category.id %>" id="category_id_<%= category.id %>">
    <% end %>
  <% end %>

    <input type="text" id="post_categories_attributes_0_name" name="post[categories_attributes][0][name]">
    <input type="text" id="post_categories_attributes_1_name" name="post[categories_attributes][1][name]">

    <%= f.submit %>
<% end %>
